<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" href="/favicon.png" />
    <link rel="stylesheet" href="/tachyons-4.10.0.min.css" />
    <meta name="theme-color" content="#111111" />
    <meta name="author" content="Brian Mock" />
    <meta
      name="description"
      content="PDXKBC is Portland, Oregon's monthly mechanical keyboard meetup"
    />
    <meta
      name="og:description"
      content="PDXKBC is Portland, Oregon's monthly mechanical keyboard meetup"
    />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@wavebeem" />
    <meta name="twitter:creator" content="@wavebeem" />
    <meta name="og:title" content="Portland Keyboard Club" />
    <meta name="og:image" content="https://pdxkbc.netlify.com/logo.png" />
    <title>PDXKBC | Portland Keyboard Club</title>
  </head>
  <body class="sans-serif bg-dark-gray near-white min-vh-100 flex flex-column">
    <h1 class="mv0 ph3 pv4 f1 lh-title b--white-20 bb bw1">
      <div class="mw7 w-100 center ph3 flex-ns items-enter">
        <div
          style="height: 4rem; width: 4rem"
          class="fl-ns bg-light-red black pa2 br2 mr3-ns mb3 mb0-ns flex"
        >
          <img src="/logo.svg" alt="pdxkbc" />
        </div>
        <a href="/" class="no-underline underline-hover color-inherit"
          >Portland Keyboard Club</a
        >
      </div>
    </h1>
    <main class="center pa3 mw7 w-100 f3 lh-copy flex-auto">
      <h2>About</h2>

      <p>
        The <b>Portland Keyboard Club</b> (<i>PDXKBC</i>) is a monthly meetup
        group for people of all ages and skill levels to showcase and discuss
        mechanical keyboards.
      </p>

      <h2>Code of Conduct</h2>

      <p>
        Please read the
        <a href="coc" class="light-red hover-red">Code of Conduct</a>
        before attending.
      </p>

      <h2>When</h2>

      <p>
        Meetups are on the last Saturday of each month, from 6:00&ndash;9:00 PM,
        with a prize giveaway at 7:30 PM. See our
        <a
          class="light-red hover-red"
          href="https://calendar.google.com/calendar?cid=OXQ2NnZtcTY2OW1ia2J0Y2tidDBuOWsxZWtAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ"
          >Google Calendar</a
        >
        for more meetup details.
      </p>

      <h2>Next meetup</h2>

      <blockquote id="next-meetup" class="bl bw1 ml0 nl3 pl3 b--white-20 i">
        Loading next meetup...
      </blockquote>

      <h2>Let's talk</h2>

      <p>
        You can chat with us on
        <a class="light-red hover-red" href="https://discord.gg/bHwjHXh"
          >Discord</a
        >
        or check our
        <a class="light-red hover-red" href="https://reddit.com/r/pdxkbc"
          >Reddit</a
        >
        for meetup info. Our official hashtag is <b>#pdxkbc</b>.
      </p>

      <h2>Organizers</h2>

      <p>
        Brian Mock (<a
          class="light-red hover-red"
          href="mailto:brian@mockbrian.com"
          style="overflow-wrap: break-word"
          >brian@mockbrian.com</a
        >)
      </p>

      <p>
        Franklin Harding (<a
          class="light-red hover-red"
          href="mailto:franklinharding0.0@gmail.com"
          style="overflow-wrap: break-word"
          >franklinharding0.0@gmail.com</a
        >)
      </p>
    </main>
    <footer class="bt b--white-10 bw1 ma0 ph3 pv3 f5a lh-title tc ttu">
      <p class="mw7 w-100 ma0 center">
        &copy; 2019
        <a class="light-red hover-red" href="https://github.com/pdxkbc"
          >PDXKBC</a
        >
      </p>
    </footer>
    <script type="module">
      const root = document.getElementById("next-meetup");
      const html = String.raw;

      async function getNextMeetup() {
        const calendarID =
          "9t66vmq669mbkbtckbt0n9k1ek@group.calendar.google.com";
        const key = "AIzaSyCntMy61tYlDNVg8ZhJXhjQqG3RkGzhnSk";
        const date = new Date();
        date.setHours(0, 0, 0, 0);
        const timeMin = date.toISOString();
        date.setMonth(date.getMonth() + 1);
        const timeMax = date.toISOString();
        const params = new URLSearchParams({
          orderBy: "startTime",
          singleEvents: true,
          timeMin,
          timeMax,
          key
        });
        const prefix = "https://content.googleapis.com/calendar/v3";
        const url = `${prefix}/calendars/${calendarID}/events?${params}`;
        const response = await fetch(url);
        const data = await response.json();
        const nextMeetup = data.items[0];
        if (!nextMeetup) {
          throw new Error("failed to load meetup");
        }
        return nextMeetup;
      }

      async function main() {
        try {
          showMeetup(await getNextMeetup());
        } catch (err) {
          console.error(err);
          showError();
        }
      }

      const dateFormatter = Intl.DateTimeFormat(undefined, {
        weekday: "long",
        month: "long",
        day: "numeric",
        year: "numeric"
      });

      function showMeetup(meetup) {
        root.innerHTML = html`
          <span data-slot="summary"></span><br />
          <span data-slot="date"></span><br /><br />
          <span data-slot="location"></span>
        `;
        root.querySelector("[data-slot=summary]").textContent = meetup.summary;
        root.querySelector("[data-slot=location]").textContent =
          meetup.location;
        root.querySelector(
          "[data-slot=date]"
        ).textContent = dateFormatter.format(new Date(meetup.start.dateTime));
      }

      function showError() {
        root.textContent =
          "Oops, something went wrong loading from Google Calendar.";
      }

      main();
    </script>
  </body>
</html>
